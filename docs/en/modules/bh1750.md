# BH1750FVI Module
| Since  | Origin / Contributor  | Maintainer  | Source  |
| :----- | :-------------------- | :---------- | :------ |
| 2017-02-11 | [Pawel Switalski](https://github.com/s-pw) | [Pawel Switalski](https://github.com/s-pw) | [bh1750.c](../../../app/modules/bh1750.c)|


This module provides access to the [BH1750FVI](https://www.mouser.com/catalog/specsheets/Rohm_11162017_ROHMS34826-1.pdf) ambient light sensor.


## bh1750.read()
Samples the sensor then returns ambient light value. It auto mode it will reconfigure sensitivity as needed.

#### Syntax
`bh1750.read()`

#### Returns
Ambient light in millilux

#### Example
```lua
local sda, scl = 1, 2
i2c.setup(0, sda, scl, i2c.SLOW)  -- call i2c.setup() only once
bh1750.setup()
local light = bh1750.read()
print(light / 1000 .. 'lx')
```


## bh1750.setup()

Initializes the module and starts the measurement.

#### Syntax
`bh1750.setup([mode] [, sensitivity])`

#### Parameters
- `mode` sensor operation mode. Note that module does not wait for measurement in one time mode, appropriate delay should be added to user code.
    * `bh1750.CONTINUOUS_AUTO` (default value) will automatically switch sensitivity and mode depending on last read value. Sets mode to `CONTINUOUS_HIGH_RES_MODE_2` with sensitivity 254 when last read value was < 7200 lux. Sets `CONTINUOUS_HIGH_RES_MODE` with sensitivity 31 when last read value was >= 7000 lux. Range 0.11 lux - 121 kilolux.
    * `bh1750.CONTINUOUS_HIGH_RES_MODE` 1 lux resolution, updates value every 120ms
    * `bh1750.CONTINUOUS_HIGH_RES_MODE_2` 0.5 lux resolution, updates value every 120ms
    * `bh1750.CONTINUOUS_LOW_RES_MODE` 4 lux resolution, updates value every 120ms
    * `bh1750.ONE_TIME_HIGH_RES_MODE` 1 lux resolution, measurement time 16ms
    * `bh1750.ONE_TIME_HIGH_RES_MODE_2` 0.5 lux resolution, measurement time 120ms
    * `bh1750.ONE_TIME_LOW_RES_MODE` 4 lux resolution, measurement time 16ms
- `sensitivity` (default value `69`) measurement time. Minimum value is `31` (least sensitive/fastest measurement) and maximum is `254` (most sensitive/slowest measurement).

#### Returns
`nil`


## bh1750.power_down()

Puts sensor in power down mode. Can be used to stop continuous read mode. Use `bh1750.setup()` to power up the sensor and start measurement.

#### Syntax
`bh1750.power_down()`

#### Returns
`nil`